(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{210:function(e,a){},215:function(e,a,t){"use strict";t.r(a);var s=t(0),c=t.n(s),r=t(12),n=t(184),l=t.n(n),m=t(3),i=t(11),u=t(8);a.default=function(){const e=Object(s.useRef)(null),a=Object(s.useRef)(null),t=Object(s.useRef)(null),n=Object(s.useContext)(i.a),o=Object(s.useContext)(u.a),[h,p]=Object(r.a)({chatFieldValue:"",chatMessages:[]});return Object(s.useEffect)(()=>(t.current=l()("http://localhost:8080"),t.current.on("chatFromServer",e=>{p(a=>{a.chatMessages.push(e)})}),()=>t.current.disconnect()),[]),Object(s.useEffect)(()=>{n.isChatOpen&&(e.current.focus(),o({type:"clearUnreadChatCount"}))},[n.isChatOpen]),Object(s.useEffect)(()=>{a.current.scrollTop=a.current.scrollHeight,h.chatMessages.length&&!n.isChatOpen&&o({type:"increaseUnreadChatCount"})},[h.chatMessages]),c.a.createElement("div",{id:"chat-wrapper",className:"chat-wrapper shadow border-top border-left border-right "+(n.isChatOpen?"chat-wrapper--is-visible ":"")},c.a.createElement("div",{className:"chat-title-bar bg-primary"},"Chat",c.a.createElement("span",{onClick:()=>o({type:"closeChat"}),className:"chat-title-bar-close"},c.a.createElement("i",{className:"fas fa-times-circle"}))),c.a.createElement("div",{id:"chat",className:"chat-log",ref:a},h.chatMessages.map((e,a)=>e.username==n.user.username?c.a.createElement("div",{key:a,className:"chat-self"},c.a.createElement("div",{className:"chat-message"},c.a.createElement("div",{className:"chat-message-inner"},e.message)),c.a.createElement("img",{className:"chat-avatar avatar-tiny",src:e.avatar})):c.a.createElement("div",{key:a,className:"chat-other"},c.a.createElement(m.b,{to:"/profile/"+e.username},c.a.createElement("img",{className:"avatar-tiny",src:e.avatar})),c.a.createElement("div",{className:"chat-message"},c.a.createElement("div",{className:"chat-message-inner"},c.a.createElement(m.b,{to:"/profile/"+e.username},c.a.createElement("strong",null,e.username,":"))," ",e.message))))),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.current.emit("chatFromBrowser",{message:h.chatFieldValue,token:n.user.token}),p(e=>{e.chatMessages.push({message:e.chatFieldValue,username:n.user.username,avatar:n.user.avatar}),e.chatFieldValue=""})},id:"chatForm",className:"chat-form border-top"},c.a.createElement("input",{value:h.chatFieldValue,onChange:function(e){const a=e.target.value;p(e=>{e.chatFieldValue=a})},ref:e,type:"text",className:"chat-field",id:"chatField",placeholder:"Type a messageâ€¦",autoComplete:"off"})))}}}]);